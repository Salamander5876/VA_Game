<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Камертон 2026</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="images/ico.png" type="image/png">
</head>
<body>
    <!-- Оверлей загрузки -->
    <div id="loading-overlay">
        <div id="loading-text">Инициализация...</div>
        <div id="loading-bar">
            <div id="progress-indicator"></div>
        </div>
    </div>
    
    <!-- Главное меню (НОВОЕ) -->
    <div id="main-menu" style="display: none;">
        <div id="menu-container">
            
            <h1 id="menu-title">Камертон 2026</h1>
            <p id="menu-subtitle">Игра о атмосфере и выборе пути</p>
            <div id="menu-buttons">
                <button class="menu-button" id="new-game-btn">Новая игра</button>
                <button class="menu-button" id="continue-game-btn" style="display: none;">Продолжить</button>
                <button class="menu-button" id="settings-btn">Настройки</button>
                <button class="menu-button" id="achievements-btn">Достижения</button>
            </div>
            
        </div>
    </div>

    <!-- Экран настроек (НОВОЕ) -->
    <div id="settings-screen" style="display: none;">
        <div class="settings-panel">
            <h2>Настройки</h2>
            <div class="setting-item">
                <label>Скорость текста:</label>
                <input type="range" id="text-speed-slider" min="0.5" max="2" step="0.5" value="1">
                <span id="text-speed-value">1x</span>
            </div>
            <div class="setting-item">
                <label>Громкость музыки:</label>
                <input type="range" id="bgm-volume-slider" min="0" max="1" step="0.1" value="0.4">
                <span id="bgm-volume-value">40%</span>
            </div>
            <div class="setting-item">
                <label>Громкость звуков:</label>
                <input type="range" id="sfx-volume-slider" min="0" max="1" step="0.1" value="0.3">
                <span id="sfx-volume-value">30%</span>
            </div>
            <div class="setting-item">
                <label>
                    <input type="checkbox" id="skip-tutorial-checkbox">
                    Пропускать обучение
                </label>
            </div>
            <button class="menu-button" id="settings-back-btn">Назад</button>
        </div>
    </div>

    <!-- Экран достижений (НОВОЕ) -->
    <div id="achievements-screen" style="display: none;">
        <div class="achievements-panel">
            <h2>Достижения</h2>
            <div id="achievements-list">
                <!-- Будет заполнено через JS -->
            </div>
            <button class="menu-button" id="achievements-back-btn">Назад</button>
        </div>
    </div>
    
    <!-- Игровой контейнер -->
    <div id="game-container" style="display: none;"> 
        <div id="header">
            <h1 id="title">Камертон 2026</h1>
            <p id="location"></p>
            <div id="progress-indicator-game">
                <span id="scene-progress"></span>
            </div>
        </div>

        <!-- Кнопка меню паузы -->
        <button id="pause-menu-btn" title="Меню">☰</button>

        <div id="story-area">
            <div id="sprite-area"></div>
            <div id="background-image"></div>
        </div>

        <div id="text-box">
            <span id="speaker-name"></span>
            <button id="hint-button">?</button>
            <p id="story-text">Нажмите, чтобы начать...</p>
            <div id="continue-prompt">Нажмите, чтобы продолжить...</div>
        </div>

        <div id="choices-container"></div>
    </div>

    <!-- История диалогов (НОВАЯ) -->
    <div id="history-panel" style="display: none;">
        <div class="history-content">
            <h3>История диалогов</h3>
            <div id="history-list"></div>
            <button class="menu-button" id="history-close-btn">Закрыть</button>
        </div>
    </div>

    <!-- Меню паузы (НОВОЕ) -->
    <div id="pause-menu" style="display: none;">
        <div class="pause-panel">
            <h2>Пауза</h2>
            <button class="menu-button" id="resume-btn">Продолжить</button>
            <button class="menu-button" id="history-btn">История</button>
            <button class="menu-button" id="pause-settings-btn">Настройки</button>
            <button class="menu-button" id="save-game-btn">Сохранить</button>
            <button class="menu-button" id="main-menu-btn">Главное меню</button>
        </div>
    </div>

    <div id="transition-overlay"></div> 

    <!-- Экран концовки -->
    <div id="ending-screen" style="display: none;">
        <h1 id="ending-title">Финальное обращение</h1>
        
        <video id="game-ending-video" width="70%" height="auto" controls preload="metadata">
            <source src="1013.mp4" type="video/mp4">
            Ваш браузер не поддерживает тег video.
        </video>

        <button id="play-video-btn" class="choice-button" style="display: none; margin-top: 20px;">Воспроизвести видео</button>

        <p id="final-message" style="display: none;"></p>
        
        <button id="ending-restart-button" class="choice-button" style="display: none; margin-top: 30px;">Начать заново</button>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>